import{l as F,j as P,M as R,s as M,k as S,S as V,v as H,o as g,c as f,a as e,E as d,G as b,d as K,F as C,n as I,N as E,O as Q,t as k,P as A,p as j,g as q,f as L,J as N,I as z,h as W,b as O,u as w}from"./index.0ee5f4ce.js";import{u as T}from"./saveData.23d44254.js";import{u as X}from"./useCheckLogin.6909e56e.js";import{_ as D}from"./plugin-vueexport-helper.2444895f.js";const B=F("modalcontrol",()=>{let s=null;const v=P(null),m=()=>{s=new R(v.value.isModal,{backdrop:"static"})},u=P(!0),i=P({imgUrl:"",imagesUrl:[""],title:"",category:"",unit:"",origin_price:"",price:"",aria:"",farm:"",description:"",content:"",is_enabled:0,is_special:0});return{productModal:s,isProductModal:v,creatProductModal:m,addProduct:($,t)=>{$==="isNew"?(u.value=!0,i.value={imgUrl:"",imagesUrl:[""],title:"",category:"",unit:"",origin_price:0,price:0,aria:"",farm:"",description:"",content:"",is_enabled:0,is_special:0}):$==="edit"&&(u.value=!1,i.value=JSON.parse(JSON.stringify(t))),s.show()},closeProductModal:()=>{s.hide()},newOrEdit:u,inComponentProduct:i}});function Y(){const s=T(),v=P({total_pages:1,current_page:1,has_pre:1,has_next:1,category:""}),{productData:m}=M(s),u=async(a=1)=>{const l=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/products?page=${a}`;try{const o=await S.get(l);m.value=Object.values(o.data.products),v.value=o.data.pagination}catch(o){console.log(o)}},i=(a,l,o="\u7522\u54C1",n="")=>{if(l)V.fire({title:`<strong>${a}\u6210\u529F</strong>`,icon:"success",html:`<span class="text-danger">${o}</span>\u5DF2\u6210\u529F${a}`}).then(()=>{u()});else{let p;Array.isArray(n)?p=n.join().replaceAll(",","\u3001"):p=n,V.fire({title:`<strong>${a}\u5931\u6557</strong>`,icon:"error",html:`<span class="text-danger">${o}</span>${a}\u5931\u6557\uFF0C\u8ACB\u91CD\u65B0\u5617\u8A66</br>`,footer:`<p class='text-danger'>${p}</p>`}).then(()=>{u()})}},c=P(null),y=B(),{closeProductModal:$}=y,t=async(a,l)=>{let o,n,p;c.value=a,l?(o="\u65B0\u589E",p="post",n="https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/product"):(o="\u7DE8\u8F2F",p="put",n=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/product/${c.value.id}`);try{console.log(l);const h=await S[p](n,{data:c.value});await u(),console.log(h.data),$(),i(o,!0,c.value.title)}catch(h){const _=JSON.parse(h.response.request.response).message;console.log(h),i(o,!1,c.value.title,_)}},U=async a=>{const l="\u522A\u9664",o=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/product/${a.id}`;try{const n=await S.delete(o);i(l,!0,a.title),console.log(n)}catch(n){const p=JSON.parse(n.response.request.response).message;i(l,!1,a.title,p),console.log(n)}};return{pushEditProduct:t,pagination:v,updataTempProduct:c,getProduct:u,productData:m,deleteAction:a=>{V.mixin({customClass:{confirmButton:"btn btn-danger m-3 p-3",cancelButton:"btn btn-outline-primary m-3 p-3"},buttonsStyling:!1}).fire({title:"<strong>\u522A\u9664\u5546\u54C1</strong>",icon:"question",html:`\u78BA\u5B9A\u8981\u522A\u9664<span class="text-danger">${a.title}</span>\u9019\u9805\u5546\u54C1\u55CE?`,confirmButtonText:"\u78BA\u5B9A\u522A\u9664",cancelButtonText:"\u53D6\u6D88",showCloseButton:!0,showCancelButton:!0}).then(o=>{o.isConfirmed&&U(a)})},actionAlert:i}}const r=s=>(j("data-v-1adb238f"),s=s(),q(),s),Z={class:"modal-dialog modal-dialog-centered modal-xl"},ee={class:"modal-content border-0"},te=r(()=>e("h5",{id:"productModalLabel",class:"modal-title"},[e("span",null,"\u65B0\u589E\u7522\u54C1")],-1)),oe={class:"modal-body"},le={class:"row"},se={class:"col-sm-4 overflow-y"},ae={class:"mb-2"},ne={class:"mb-3"},ie=r(()=>e("label",{for:"imageUrl",class:"form-label"},"\u4E3B\u5716",-1)),ce=["src"],de={class:"mb-3"},re=["disabled","onClick"],ue=["onUpdate:modelValue"],pe=["src"],me=["disabled"],ve={class:"col-sm-8 overflow-y"},_e={class:"mb-3"},be=r(()=>e("label",{for:"title",class:"form-label"},"\u7522\u54C1\u6A19\u984C",-1)),he={class:"row"},ge={class:"mb-3 col-md-6"},fe=r(()=>e("label",{for:"category",class:"form-label"},"\u7522\u54C1\u5206\u985E",-1)),ye=L('<option value="" disabled data-v-1adb238f>\u8ACB\u9078\u64C7\u5206\u985E</option><option value="\u4E94\u7A40" data-v-1adb238f>\u4E94\u7A40</option><option value="\u852C\u679C" data-v-1adb238f>\u852C\u679C</option><option value="\u8089\u54C1" data-v-1adb238f>\u8089\u54C1</option><option value="\u4E73\u86CB" data-v-1adb238f>\u4E73\u86CB</option><option value="\u6C34\u7522" data-v-1adb238f>\u6C34\u7522</option>',6),$e=[ye],ke={class:"mb-3 col-md-6"},Pe=r(()=>e("label",{for:"price",class:"form-label"},"\u55AE\u4F4D",-1)),Ue={class:"row"},we={class:"mb-3 col-md-6"},xe=r(()=>e("label",{for:"origin_price",class:"form-label"},"\u539F\u50F9",-1)),Me={class:"mb-3 col-md-6"},Ce=r(()=>e("label",{for:"price",class:"form-label"},"\u552E\u50F9",-1)),Se={class:"mb-3 col-md-6"},Ve=r(()=>e("label",{for:"aria",class:"form-label"},"\u7522\u5730",-1)),Ae=L('<option value="" disabled data-v-1adb238f>\u8ACB\u9078\u64C7\u7522\u5730</option><option value="\u5317\u90E8" data-v-1adb238f>\u5317\u90E8</option><option value="\u4E2D\u90E8" data-v-1adb238f>\u4E2D\u90E8</option><option value="\u5357\u90E8" data-v-1adb238f>\u5357\u90E8</option><option value="\u6771\u90E8" data-v-1adb238f>\u6771\u90E8</option><option value="\u96E2\u5CF6" data-v-1adb238f>\u96E2\u5CF6</option>',6),Ne=[Ae],ze={class:"mb-3 col-md-6"},Ie=r(()=>e("label",{for:"price",class:"form-label"},"\u7267\u5834",-1)),Be={class:"row"},Ee={class:"mb-3 col-md-6"},Oe=r(()=>e("label",{for:"origin_price",class:"form-label"},"\u5EAB\u5B58\u6578\u91CF",-1)),je=r(()=>e("hr",null,null,-1)),qe={class:"mb-3"},Le=r(()=>e("label",{for:"description",class:"form-label"},"\u7522\u54C1\u63CF\u8FF0",-1)),Te={class:"mb-3"},De=r(()=>e("label",{for:"content",class:"form-label"},"\u8AAA\u660E\u5167\u5BB9",-1)),Je={class:"mb-3"},Ge={class:"form-check"},Fe={class:"form-check-label",for:"is_enabled"},Re={class:"form-check"},He=r(()=>e("label",{class:"form-check-label",for:"season"}," \u5B63\u7BC0\u7522\u54C1 ",-1)),Ke={class:"form-check"},Qe=r(()=>e("label",{class:"form-check-label",for:"hotItem"}," \u7CBE\u9078\u71B1\u92B7 ",-1)),We={class:"form-check"},Xe=r(()=>e("label",{class:"form-check-label",for:"none"}," \u7121 ",-1)),Ye={__name:"ComponentProductModal",emits:["update-product"],setup(s,{expose:v,emit:m}){const u=P(null),i=B(),{closeProductModal:c}=i,{newOrEdit:y,inComponentProduct:$}=M(i),t=P({imgUrl:"",imagesUrl:[""],title:"",category:"",unit:"",origin_price:"",price:0,aria:0,farm:"",description:"",content:"",is_enabled:0,is_special:0,qty:0});v({isModal:u}),H($,a=>{console.log(a),t.value=a});const U=()=>{m("update-product",t.value,y.value)},x=()=>{y.value=null,t.value={imgUrl:"",imagesUrl:[""],title:"",category:"",unit:"",origin_price:0,price:0,aria:"",farm:"",description:"",content:"",is_enabled:1,is_special:0,qty:0},c()};return(a,l)=>(g(),f("div",{class:"modal fade",id:"productModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref_key:"isModal",ref:u},[e("div",Z,[e("div",ee,[e("div",{class:"modal-header bg-dark text-white"},[te,e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:x})]),e("div",oe,[e("div",le,[e("div",se,[e("div",ae,[e("div",ne,[ie,d(e("input",{type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50","onUpdate:modelValue":l[0]||(l[0]=o=>t.value.imgUrl=o)},null,512),[[b,t.value.imgUrl,void 0,{lazy:!0}]]),e("img",{class:"img-fluid",src:t.value.imgUrl,alt:""},null,8,ce)]),e("div",de,[K(" \u591A\u5716\u65B0\u589E "),e("button",{type:"button",class:"btn btn-outline-danger",onClick:l[1]||(l[1]=o=>t.value.imagesUrl=[""])}," \u6E05\u9664\u5168\u90E8 "),e("div",null,[(g(!0),f(C,null,I(t.value.imagesUrl,(o,n)=>(g(),f("div",{key:n+"1235"},[e("button",{type:"button",class:"btn btn-danger",disabled:n==t.value.imagesUrl.length-1&&!t.value.imagesUrl[t.value.imagesUrl.length-1],onClick:p=>t.value.imagesUrl.splice(n,1)}," \u522A\u9664\u5716\u7247 ",8,re),d(e("input",{type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50","onUpdate:modelValue":p=>t.value.imagesUrl[n]=p},null,8,ue),[[b,t.value.imagesUrl[n],void 0,{lazy:!0}]]),e("img",{class:"img-fluid",src:t.value.imagesUrl[n],alt:""},null,8,pe)]))),128)),e("button",{type:"button",class:"btn btn-primary w-100",onClick:l[2]||(l[2]=o=>t.value.imagesUrl.push("")),disabled:!t.value.imagesUrl.length||!t.value.imagesUrl[t.value.imagesUrl.length-1]}," \u65B0\u589E\u5716\u7247 ",8,me)])])])]),e("div",ve,[e("div",_e,[be,d(e("input",{id:"title",type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u6A19\u984C","onUpdate:modelValue":l[3]||(l[3]=o=>t.value.title=o)},null,512),[[b,t.value.title,void 0,{lazy:!0}]])]),e("div",he,[e("div",ge,[fe,d(e("select",{id:"category","aria-label":"aria","onUpdate:modelValue":l[4]||(l[4]=o=>t.value.category=o),required:"",class:"form-select"},$e,512),[[E,t.value.category]])]),e("div",ke,[Pe,d(e("input",{id:"unit",type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u55AE\u4F4D","onUpdate:modelValue":l[5]||(l[5]=o=>t.value.unit=o)},null,512),[[b,t.value.unit,void 0,{lazy:!0}]])])]),e("div",Ue,[e("div",we,[xe,d(e("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u539F\u50F9","onUpdate:modelValue":l[6]||(l[6]=o=>t.value.origin_price=o)},null,512),[[b,t.value.origin_price,void 0,{lazy:!0,number:!0}]])]),e("div",Me,[Ce,d(e("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u552E\u50F9","onUpdate:modelValue":l[7]||(l[7]=o=>t.value.price=o)},null,512),[[b,t.value.price,void 0,{lazy:!0,number:!0}]])]),e("div",Se,[Ve,d(e("select",{"aria-label":"aria","onUpdate:modelValue":l[8]||(l[8]=o=>t.value.aria=o),required:"",id:"aria",class:"form-select"},Ne,512),[[E,t.value.aria]])]),e("div",ze,[Ie,d(e("input",{id:"farm",type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u7267\u5834","onUpdate:modelValue":l[9]||(l[9]=o=>t.value.farm=o)},null,512),[[b,t.value.farm,void 0,{lazy:!0}]])])]),e("div",Be,[e("div",Ee,[Oe,d(e("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5EAB\u5B58","onUpdate:modelValue":l[10]||(l[10]=o=>t.value.qty=o)},null,512),[[b,t.value.qty,void 0,{lazy:!0,number:!0}]])])]),je,e("div",qe,[Le,d(e("textarea",{id:"description",type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u63CF\u8FF0","onUpdate:modelValue":l[11]||(l[11]=o=>t.value.description=o)},`
                `,512),[[b,t.value.description,void 0,{lazy:!0}]])]),e("div",Te,[De,d(e("textarea",{id:"content",type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u8AAA\u660E\u5167\u5BB9","onUpdate:modelValue":l[12]||(l[12]=o=>t.value.content=o)},`
                `,512),[[b,t.value.content,void 0,{lazy:!0}]])]),e("div",Je,[e("div",null,[e("div",Ge,[d(e("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[13]||(l[13]=o=>t.value.is_enabled=o),"true-value":1,"false-value":0},null,512),[[Q,t.value.is_enabled,void 0,{number:!0}]]),e("label",Fe,"\u662F\u5426\u555F\u7528 "+k(t.value.is_enabled),1)])]),e("div",null,[e("div",Re,[d(e("input",{class:"form-check-input",type:"radio",name:"special",id:"season",value:"2","onUpdate:modelValue":l[14]||(l[14]=o=>t.value.is_special=o)},null,512),[[A,t.value.is_special,void 0,{number:!0}]]),He]),e("div",Ke,[d(e("input",{class:"form-check-input",type:"radio",name:"special",id:"hotItem",value:"1","onUpdate:modelValue":l[15]||(l[15]=o=>t.value.is_special=o)},null,512),[[A,t.value.is_special,void 0,{number:!0}]]),Qe]),e("div",We,[d(e("input",{class:"form-check-input",type:"radio",name:"special",id:"none",value:"0","onUpdate:modelValue":l[16]||(l[16]=o=>t.value.is_special=o)},null,512),[[A,t.value.is_special,void 0,{number:!0}]]),Xe])])])])])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-outline-secondary",onClick:x}," \u53D6\u6D88 "),e("button",{type:"button",class:"btn btn-primary",onClick:U}," \u78BA\u8A8D ")])])])],512))}},Ze=D(Ye,[["__scopeId","data-v-1adb238f"]]),et={"aria-label":"Page navigation   "},tt={class:"pagination d-flex justify-content-center"},ot=e("span",{"aria-hidden":"true"},"\xAB",-1),lt=[ot],st=["onClick"],at=e("span",{"aria-hidden":"true"},"\xBB",-1),nt=[at],it={__name:"productPagination",props:{pages:{type:Object,default(){return{}}}},emits:["get-product"],setup(s,{emit:v}){const m=u=>{v("get-product",u)};return(u,i)=>(g(),f("nav",et,[e("ul",tt,[e("li",{class:N(["page-item",{disabled:!s.pages.has_pre}])},[e("a",{class:"page-link",href:"#",onClick:i[0]||(i[0]=z(c=>m(s.pages.current_page-1),["prevent"])),"aria-label":"Previous"},lt)],2),(g(!0),f(C,null,I(s.pages.total_pages,c=>(g(),f("li",{class:N(["page-item",{active:c===s.pages.current_page}]),key:c+13215},[e("a",{class:"page-link",href:"#",onClick:z(y=>m(c),["prevent"])},k(c),9,st)],2))),128)),e("li",{class:N(["page-item",{disabled:!s.pages.has_next}])},[e("a",{class:"page-link",href:"#","aria-label":"Next",onClick:i[1]||(i[1]=z(c=>m(s.pages.current_page+1),["prevent"]))},nt)],2)])]))}};const ct=s=>(j("data-v-728cb0dd"),s=s(),q(),s),dt={class:"container-lg"},rt={class:"row justify-content-end mb-3"},ut={class:"col-2"},pt={class:"table text-center align-middle w-100"},mt=ct(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col",width:"5%"}),e("th",{scope:"col",width:"20%"},"\u5546\u54C1\u5716\u7247"),e("th",{scope:"col"},"\u5546\u54C1\u540D\u7A31"),e("th",{scope:"col",width:"15%"},"\u8FB2\u5834"),e("th",{scope:"col",width:"10%"},"\u50F9\u683C"),e("th",{scope:"col",width:"10%"},"\u4E0A\u67B6"),e("th",{scope:"col",width:"20%"},"\u64CD\u4F5C")])],-1)),vt={scope:"row",class:""},_t=["src"],bt={class:""},ht={class:"table-word-overflow text-start fw-bold"},gt={class:"d-flex justify-content-around align-items-center flex-wrap gap-1"},ft=["onClick"],yt=["onClick"],$t={__name:"AdminProductEdit",setup(s){const v=B(),{addProduct:m,closeModal:u,creatProductModal:i}=v,{isProductModal:c}=M(v),{checkLogin:y}=X(),$=T(),{productData:t}=M($),{getProduct:U,deleteAction:x,pagination:a,pushEditProduct:l}=Y();(async()=>{await y(),await U()})();const n=(p,h)=>{l(p,h)};return W(()=>{i()}),(p,h)=>(g(),f(C,null,[O(Ze,{ref_key:"isProductModal",ref:c,onUpdateProduct:n},null,512),e("div",dt,[e("div",rt,[e("div",ut,[e("button",{type:"button",class:"btn btn-primary w-100",onClick:h[0]||(h[0]=_=>w(m)("isNew"))}," \u65B0\u589E\u7522\u54C1 ")])]),e("table",pt,[mt,e("tbody",null,[(g(!0),f(C,null,I(w(t),(_,J)=>(g(),f("tr",{key:_.id,class:""},[e("th",vt,k(J+1),1),e("td",null,[e("img",{src:_.imgUrl,alt:"",class:"itemimg"},null,8,_t)]),e("td",bt,[e("span",ht,k(_.title),1)]),e("td",null,k(_.farm),1),e("td",null,k(_.price),1),e("td",null,k(_.is_enabled),1),e("td",null,[e("div",gt,[e("button",{type:"button",class:"btn btn-primary",onClick:G=>w(m)("edit",_)}," \u7DE8\u8F2F ",8,ft),e("button",{type:"button",class:"btn btn-outline-danger",onClick:G=>w(x)(_)}," \u522A\u9664 ",8,yt)])])]))),128))])]),O(it,{pages:w(a),onGetProduct:w(U)},null,8,["pages","onGetProduct"])])],64))}},xt=D($t,[["__scopeId","data-v-728cb0dd"]]);export{xt as default};
